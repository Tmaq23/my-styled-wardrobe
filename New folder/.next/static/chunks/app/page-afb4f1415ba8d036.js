(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4400:(e,t,a)=>{Promise.resolve().then(a.bind(a,9359))},9359:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),i=a(2115);function l(e){let{colors:t}=e;return(0,s.jsx)("div",{className:"swatches",children:t.map((e,t)=>(0,s.jsx)("div",{className:"swatch",style:{background:e},title:e},t))})}function n(e){let{product:t}=e;return(0,s.jsxs)("a",{className:"card card-pad",href:t.url,target:"_blank",rel:"noreferrer",children:[(0,s.jsx)("img",{src:t.image||"https://via.placeholder.com/600x800?text=Product",alt:t.title,style:{width:"100%",aspectRatio:"3/4",objectFit:"cover",borderRadius:12}}),(0,s.jsx)("div",{style:{marginTop:10,fontWeight:600},children:t.title}),(0,s.jsxs)("div",{style:{color:"#c6c6c8",fontSize:14},children:[t.brand||"Brand"," • ",t.currency||"\xa3",t.price||0]}),t.tags&&(0,s.jsx)("div",{style:{display:"flex",gap:6,flexWrap:"wrap",marginTop:8},children:t.tags.slice(0,3).map(e=>(0,s.jsx)("span",{className:"kbd",children:e},e))})]})}var r=a(1998);function c(e){var t,a;let{palette:l,shape:n,onPalette:c,onShape:d}=e,[o,h]=(0,i.useState)(!1),[m,p]=(0,i.useState)(null),[u,g]=(0,i.useState)(null),x=(0,i.useRef)(null);async function f(e){var t;let a=null==(t=e.target.files)?void 0:t[0];a&&(p(URL.createObjectURL(a)),await j(a))}async function j(e){h(!0),g(null);try{var t;let a=document.createElement("img");a.src=URL.createObjectURL(e),await a.decode();let s=await r.Ps.forVisionTasks("https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@latest/wasm"),i=await r.Pi.createFromOptions(s,{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/pose_landmarker/pose_landmarker_lite/float16/1/pose_landmarker_lite.task"},runningMode:"IMAGE",numPoses:1}),l=document.createElement("canvas");l.width=a.width,l.height=a.height;let n=l.getContext("2d");n.drawImage(a,0,0);let o=null==(t=i.detect(l).landmarks)?void 0:t[0];if(!o)throw Error("No body detected");let h=(e,t)=>Math.abs(o[e].x-o[t].x)*a.width,m=h(11,12),p=h(23,24),u=Math.round((o[24].y+o[23].y+o[11].y+o[12].y)/4*a.height*.9),g=[];for(let e of[-6,-3,0,3,6]){let t=Math.min(Math.max(u+e,0),a.height-1),s=n.getImageData(0,t,a.width,1).data,i=1/0,l=-1/0;for(let e=0;e<a.width;e++)s[4*e+3]>5&&(i=Math.min(i,e),l=Math.max(l,e));l>i&&isFinite(i)&&isFinite(l)&&g.push(l-i)}let x=g.length?g.sort((e,t)=>e-t)[Math.floor(g.length/2)]:.9*Math.min(m,p),f=Math.min(m,p),j=Math.min(Math.max(x,.55*f),f),y=function(e,t,a){if(!isFinite(e)||!isFinite(t)||!isFinite(a)||e<=0||a<=0)return"Rectangle";let s=(e-a)/Math.max(e,a),i=t/a,l=t/e,n=.12>=Math.abs(s);return(i<=.75||l<=.75)&&n?"Hourglass":s<=-.12&&i>=.8?"Triangle":s>=.12&&l>=.8?"Inverted Triangle":i>=.95||l>=.95?"Round":"Rectangle"}(m,j,p),b=Math.round(o[1].x*a.width),v=Math.round(o[1].y*a.height),w=Math.max(6,Math.round(.02*Math.min(a.width,a.height))),N=n.getImageData(Math.max(0,b-w),Math.max(0,v-w),2*w,2*w).data,k=0,S=0,R=0,M=0;for(let e=0;e<N.length;e+=4)k+=N[e],S+=N[e+1],R+=N[e+2],M++;k/=M,S/=M;let C=(R/=M)>=S&&R>=k||S>=k&&R>=k,T=(k+S+R)/3>140;c(C?T?"Summer":"Winter":T?"Spring":"Autumn"),d(y)}catch(e){g(e.message||"Detection failed")}finally{h(!1)}}return(0,s.jsxs)("div",{className:"card section",children:[(0,s.jsx)("h3",{children:"Profile (upload full-body picture)"}),(0,s.jsx)("input",{ref:x,className:"input",type:"file",accept:"image/*",onChange:f}),m&&(0,s.jsx)("img",{src:m,alt:"preview",style:{width:"100%",marginTop:12,borderRadius:12}}),(0,s.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center",marginTop:8},children:[(0,s.jsx)("button",{className:"button",disabled:!(null==(a=x.current)||null==(t=a.files)?void 0:t[0])||o,onClick:()=>j(x.current.files[0]),children:o?"Analysing…":"Re-run detect"}),u&&(0,s.jsx)("span",{className:"kbd",children:u})]})]})}function d(e){let{onChange:t}=e,[a,l]=(0,i.useState)([]),n=(0,i.useRef)(null);return(0,s.jsxs)("div",{className:"card section",children:[(0,s.jsx)("h3",{children:"Upload wardrobe (up to 12)"}),(0,s.jsx)("input",{ref:n,className:"input",type:"file",accept:"image/*",multiple:!0,onChange:function(e){let a=Array.from(e.target.files||[]).slice(0,12);l(a),t(a)}}),(0,s.jsx)("div",{className:"grid",style:{marginTop:12},children:a.map((e,t)=>{let a=URL.createObjectURL(e);return(0,s.jsx)("img",{src:a,alt:"wardrobe-".concat(t),style:{width:"100%",aspectRatio:"1/1",objectFit:"cover",borderRadius:12}},t)})}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:12},children:(0,s.jsx)("button",{className:"button",disabled:!a.length,onClick:()=>t(a),children:"Create outfits from wardrobe"})})]})}var o=a(2699),h=a.n(o);function m(e){let{items:t,title:a,bg:l="#efe8df"}=e,n=(0,i.useRef)(null);async function r(){if(!n.current)return;let e=(await h()(n.current,{backgroundColor:l,scale:2})).toDataURL("image/png"),t=document.createElement("a");t.href=e,t.download="".concat(a||"outfit-board",".png"),t.click()}return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{ref:n,style:{background:l,padding:16,borderRadius:16,display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:t.map((e,t)=>(0,s.jsx)("div",{style:{background:"white",borderRadius:12,padding:8},children:(0,s.jsx)("img",{src:e.image,alt:e.title||"item-".concat(t),style:{width:"100%",aspectRatio:"1/1",objectFit:"contain"}})},t))}),(0,s.jsx)("button",{className:"button",style:{marginTop:12},onClick:r,children:"Export board"})]})}let p={Spring:["#f7d6a1","#ffe9c9","#f6aa1c","#6cc551","#70c9e8","#f77aa1"],Summer:["#e5d4ff","#c8d4f0","#a3c1d1","#90b4c1","#f3b0c3","#9abf8f"],Autumn:["#f2c792","#e2a36b","#c27b48","#6c8a45","#8f5d3f","#3f5a5a"],Winter:["#f2f2f2","#c9d6ff","#3a86ff","#8338ec","#ff006e","#0b0c0e"]};function u(){let[e,t]=(0,i.useState)(null),[a,r]=(0,i.useState)(null),[o,h]=(0,i.useState)("Winter"),[u,g]=(0,i.useState)("Rectangle"),[x,f]=(0,i.useState)("Work"),[j,y]=(0,i.useState)("\xa3\xa3"),[b,v]=(0,i.useState)("Women"),[w,N]=(0,i.useState)([]),[k,S]=(0,i.useState)(""),[R,M]=(0,i.useState)(!1),[C,T]=(0,i.useState)(!1),[U,W]=(0,i.useState)([]),[F,_]=(0,i.useState)(["Next","River Island","M&S","Zara"]),[O,P]=(0,i.useState)([]),[L,A]=(0,i.useState)("#efe8df");async function E(){M(!0),T(!1),N([]),S(""),W([]);let t=new FormData;e&&t.append("image",e),t.append("palette",o),t.append("shape",u),t.append("occasion",x),t.append("budget",j),t.append("gender",b),t.append("retailers",JSON.stringify(F));let a=await fetch("/api/recommend",{method:"POST",body:t}),s=await a.json();N((s.aiUsed?s.products:[])||[]),S(s.aiUsed&&s.copy||""),T(!!s.aiUsed),W(Array.isArray(s.looks)?s.looks:[]),M(!1)}return(0,s.jsxs)("div",{className:"container",children:[(0,s.jsxs)("div",{className:"header",children:[(0,s.jsx)("img",{src:"/logo.svg",className:"logo",alt:"logo"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{children:"My Styled Wardrobe"}),(0,s.jsx)("div",{className:"subtitle",children:"Personal colour & fit → instant outfits."})]})]}),(0,s.jsxs)("div",{className:"row",children:[(0,s.jsx)(c,{palette:o,shape:u,onPalette:h,onShape:g}),(0,s.jsx)(d,{onChange:P}),(0,s.jsxs)("div",{className:"card section",children:[(0,s.jsx)("h3",{children:"2) Choose palette & body shape"}),(0,s.jsx)("label",{children:"Palette"}),(0,s.jsx)("div",{style:{display:"flex",gap:8,margin:"8px 0 12px"},children:["Spring","Summer","Autumn","Winter"].map(e=>(0,s.jsx)("button",{onClick:()=>h(e),className:"button",style:{opacity:o===e?1:.7},children:e},e))}),(0,s.jsx)(l,{colors:p[o]}),(0,s.jsx)("div",{style:{height:12}}),(0,s.jsx)("label",{children:"Body shape"}),(0,s.jsx)("div",{style:{display:"flex",gap:8,margin:"8px 0 12px",flexWrap:"wrap"},children:["Hourglass","Triangle","Inverted Triangle","Rectangle","Round"].map(e=>(0,s.jsx)("button",{onClick:()=>g(e),className:"button",style:{opacity:u===e?1:.7},children:e},e))}),(0,s.jsx)("label",{children:"Occasion"}),(0,s.jsx)("div",{style:{display:"flex",gap:8,margin:"8px 0 12px"},children:["Work","Smart-casual","Formal","Weekend"].map(e=>(0,s.jsx)("button",{onClick:()=>f(e),className:"button",style:{opacity:x===e?1:.7},children:e},e))}),(0,s.jsx)("label",{children:"Budget"}),(0,s.jsx)("label",{children:"Gender"}),(0,s.jsx)("div",{style:{display:"flex",gap:8,margin:"8px 0 12px"},children:["Women","Men","Unisex"].map(e=>(0,s.jsx)("button",{onClick:()=>v(e),className:"button",style:{opacity:b===e?1:.7},children:e},e))}),(0,s.jsx)("div",{style:{display:"flex",gap:8,margin:"8px 0 12px"},children:["\xa3","\xa3\xa3","\xa3\xa3\xa3"].map(e=>(0,s.jsx)("button",{onClick:()=>y(e),className:"button",style:{opacity:j===e?1:.7},children:e},e))}),(0,s.jsx)("label",{children:"Retailers (UK high street)"}),(0,s.jsx)("div",{style:{display:"flex",gap:8,margin:"8px 0 12px",flexWrap:"wrap"},children:["Next","River Island","M&S","Zara"].map(e=>(0,s.jsx)("button",{onClick:()=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:"button",style:{opacity:F.includes(e)?1:.6},type:"button",children:e},e))}),(0,s.jsx)("button",{className:"button",onClick:E,disabled:R,children:R?"Getting recommendations…":"Get recommendations"})]})]}),(0,s.jsx)("div",{style:{height:20}}),(R||C)&&(0,s.jsxs)("div",{className:"card section",children:[(0,s.jsx)("h3",{children:"Your looks"}),R&&(0,s.jsxs)("div",{className:"grid",style:{marginTop:8},children:[(0,s.jsx)("div",{className:"skeleton",style:{height:220}}),(0,s.jsx)("div",{className:"skeleton",style:{height:220}}),(0,s.jsx)("div",{className:"skeleton",style:{height:220}}),(0,s.jsx)("div",{className:"skeleton",style:{height:220}})]}),C&&(0,s.jsxs)(s.Fragment,{children:[k&&(0,s.jsx)("p",{style:{whiteSpace:"pre-wrap",marginBottom:12},children:k}),U&&U.length>0&&(0,s.jsx)("div",{style:{display:"grid",gap:16},children:U.slice(0,3).map((e,t)=>(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:e.name||"Look ".concat(t+1)}),e.items&&e.items[0]?(0,s.jsxs)("a",{className:"card card-pad",href:e.items[0].url,target:"_blank",rel:"noreferrer",children:[(0,s.jsx)("img",{src:e.items[0].image,alt:e.items[0].title||"item",style:{width:"100%",aspectRatio:"3/4",objectFit:"cover",borderRadius:12}}),(0,s.jsx)("div",{style:{marginTop:10},children:e.items[0].title||"View item"})]}):(0,s.jsx)("div",{className:"skeleton",style:{height:220}}),e.desc&&(0,s.jsx)("div",{style:{color:"#c6c6c8",fontSize:14,marginTop:6},children:e.desc})]},t))}),w.length>0&&(0,s.jsx)("div",{className:"grid",children:w.map(e=>(0,s.jsx)(n,{product:e},e.id))})]})]}),(O.length>0||C&&w.length>0)&&(0,s.jsxs)("div",{className:"card section",children:[(0,s.jsx)("h3",{children:"Outfit board"}),(0,s.jsx)(m,{items:[...O.map(e=>({image:URL.createObjectURL(e)})).slice(0,6),...w.slice(0,6).map(e=>({image:e.image,title:e.title}))],title:"my-styled-wardrobe",bg:L})]}),(0,s.jsx)("div",{style:{height:40}}),(0,s.jsx)("p",{style:{color:"#9e9ea1"},children:"Tip: switch palette/shape to see how recommendations adjust."})]})}}},e=>{e.O(0,[316,998,441,964,358],()=>e(e.s=4400)),_N_E=e.O()}]);